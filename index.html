<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>资源下载页面</title>
<!-- DNS预解析 -->
<link rel="dns-prefetch" href="//raw.githubusercontent.com">
<link rel="dns-prefetch" href="//github.elemecdn.com">
<link rel="dns-prefetch" href="//gcore.jsdelivr.net">
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  video, img { max-width: 100%; height: auto; margin: 10px 0; }
  .section { margin-bottom: 30px; }
  .load-status { color: #666; font-size: 14px; margin-top: 5px; }
  .load-status.success { color: #4CAF50; }
  .load-status.error { color: #F44336; }
</style>
</head>
<body>

<h1>资源下载页面</h1>

<!-- 下拉菜单下载区 -->
<div class="section">
  <p>
    <select name="jumpMenu" id="jumpMenu" onchange="parent.location=this.value">
      <option value="">请选择下载资源</option>
      <option value="https://wwwk.qyshare.com:2999/s/302">302网盘</option>
      <option value="https://www.now61.cn/f/7z3WcW/302%20%281%29.zip">302直链</option>
      <option value="https://wwwk.qyshare.com:2999/s/smmwe">smmwe网盘</option>
      <option value="https://www.now61.cn/f/NLDmup/SMM_WE%203.5.1%20Installer%20%282%29.exe">smmwe直链(exe)</option>
      <option value="https://www.now61.cn/f/xjzNC0/SMM_WE%203.5.1%20Portable.zip">smmwe直链(zip)</option>
    </select>
    选择后自动跳转下载
  </p>
</div>

<hr style="margin: 20px 0;" />

<!-- 直接链接下载区 -->
<div class="section">
  <p>或点击下方直接下载链接：</p>
  <p><strong>1. 302 相关下载</strong></p>
  <p><a href="https://wwwk.qyshare.com:2999/s/302" title="first">网盘下载（302）</a></p>
  <p><a href="https://www.now61.cn/f/7z3WcW/302%20%281%29.zip">直接下载：302.zip（备用）</a></p>

  <p>&nbsp;</p>

  <p><strong>2. smmwe 相关下载</strong></p>
  <p><a href="https://wwwk.qyshare.com:2999/s/smmwe" accesskey="2">网盘下载+安装（smmwe）</a></p>
  <p><a href="https://www.now61.cn/f/NLDmup/SMM_WE%203.5.1%20Installer%20%282%29.exe">直接下载：smmwe安装包.exe（推荐）</a></p>
  <p><a href="https://www.now61.cn/f/xjzNC0/SMM_WE%203.5.1%20Portable.zip">直接下载：smmwe绿色版.zip（备用）</a></p>
</div>

<hr style="margin: 20px 0;" />

<!-- 视频区 -->
<div class="section">
  <h2>资讯视频</h2>
  <video id="myVideo" controls crossorigin="anonymous" preload="metadata">
    <source src="https://raw.githubusercontent.com/linker9527/linker9527/main/1.mp4" type="video/mp4" data-source="github">
    <source src="https://github.elemecdn.com/linker9527/linker9527/main/1.mp4" type="video/mp4" data-source="eleme">
    <source src="https://gcore.jsdelivr.net/gh/linker9527/linker9527/1.mp4" type="video/mp4" data-source="jsdelivr">
    您的浏览器不支持视频播放，请<a href="https://gcore.jsdelivr.net/gh/linker9527/linker9527/1.mp4" download>点击下载</a>观看。
  </video>
  <div id="videoStatus" class="load-status">加载中...</div>
</div>

<!-- 图片区 -->
<div class="section">
  <h2>广告图片</h2>
  <img 
    id="myImg"
    src="https://raw.githubusercontent.com/linker9527/linker9527/main/1.png" 
    data-eleme="https://github.elemecdn.com/linker9527/linker9527/main/1.png"
    data-jsdelivr="https://gcore.jsdelivr.net/gh/linker9527/linker9527/1.png"
    alt="广告图片"
    onload="imgLoaded(this, 'github')"
    onerror="imgError(this)"
  >
  <div id="imgStatus" class="load-status">加载中...</div>
</div>

<script>
// 视频加载提示
const video = document.getElementById('myVideo');
const videoStatus = document.getElementById('videoStatus');
let videoRetryCount = 0;
const maxRetry = 2;

video.addEventListener('loadeddata', function() {
  const currentSource = Array.from(video.querySelectorAll('source')).find(s => s.src === video.currentSrc);
  const sourceType = currentSource?.dataset.source || 'unknown';
  videoStatus.textContent = `✅ 已从 ${sourceType} 节点加载`;
  videoStatus.className = 'load-status success';
});

video.addEventListener('error', function() {
  if (videoRetryCount >= maxRetry) {
    videoStatus.textContent = '❌ 所有节点均无法加载';
    videoStatus.className = 'load-status error';
    return;
  }

  const sources = video.querySelectorAll('source');
  const currentSource = Array.from(sources).find(s => s.src === video.currentSrc);
  const sourceType = currentSource?.dataset.source || 'unknown';

  videoStatus.textContent = `❌ ${sourceType} 节点加载失败，正在切换...`;
  videoStatus.className = 'load-status error';

  if (sourceType === 'github') {
    video.src = sources[1].src; // 切饿了么CDN
  } else if (sourceType === 'eleme') {
    video.src = sources[2].src; // 切jsDelivr
  }
  video.load();
  videoRetryCount++;
});

// 图片加载提示
function imgLoaded(img, sourceType) {
  const imgStatus = document.getElementById('imgStatus');
  imgStatus.textContent = `✅ 已从 ${sourceType} 节点加载`;
  imgStatus.className = 'load-status success';
}

function imgError(img) {
  const imgStatus = document.getElementById('imgStatus');
  if (img.src.includes('raw.githubusercontent.com')) {
    img.src = img.dataset.eleme;
    imgStatus.textContent = '❌ GitHub节点加载失败，正在切换到饿了么CDN...';
  } else if (img.src.includes('github.elemecdn.com')) {
    img.src = img.dataset.jsdelivr;
    imgStatus.textContent = '❌ 饿了么CDN节点加载失败，正在切换到jsDelivr...';
  } else {
    img.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==';
    imgStatus.textContent = '❌ 所有节点均无法加载';
    imgStatus.className = 'load-status error';
  }
}
</script>

</body>
</html>
